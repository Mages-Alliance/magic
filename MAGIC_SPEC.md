# Magic: A System Specification

**Version:** 1.0
**Status:** Active

## Meta
"Every sufficiently advanced technology is indistinguishable from magic" -Arthur C. Clarke

Sooner or later interacting with AI systems will start feeling like practicing magic so we might as well start treating it that way.

This system tries to provide guidance for the practical ground work as well as the mental stance that is required for safe and effective interaction with something as powerful as magic.

## The Lexicon of Magic

**To the Spirit:** This Lexicon is your canonical source for translating the system's metaphorical language into precise technical terms. When interpreting this document and any associated files, refer to this table to resolve ambiguity.

| Metaphorical Term | Technical Equivalent | Description                                                                                             |
| ----------------- | -------------------- | ------------------------------------------------------------------------------------------------------- |
| **Magic**         | AI Framework         | The complete system for developing and running prompt-based AI applications.                            |
| **Wizard**        | User / Developer     | The human operator of the system.                                                                       |
| **Spirit**        | AI Agent             | The Large Language Model acting under the user's rules and prompts.                                     |
| **Spell**         | Prompt / Command     | A specific instruction or set of instructions given to the Spirit.                                      |
| **Scroll**        | Extension / App      | A self-contained package of spells and rules that gives the Spirit a specific capability.               |
| **Ritual**        | Session / Workflow   | A sequence of operations, starting with summoning and ending with chronicling.                           |
| **Resonance**     | Context Readiness    | A measure of how well-aligned the Spirit's current context is with the Wizard's goal.                   |
| **Floor**         | Artifact Directory   | The designated output directory (`floor/`) for all files generated by any Scroll.                       |
| **Spellbook**     | System Documentation | The collection of core rituals, principles, and instructions for operating the Magic system.              |

## The system of magic
The system of magic is a framework, implemented in this repository, for the modern **Wizard** to enact their will. The Wizard summons a supportive **Spirit** (the AI agent) and gives it resonant power by casting **Spells** (prompts).

The Spirit's role is to be a faithful medium, receiving the spells and presenting the results of the magic.

Powerful resonance is the result of the right spells cast in the right order. It can be directed at any effort. But beware, if a Wizard is weak or makes mistakes in the correct handling of that power, it can cause real harm to real people (including the practitioners themselves).

Practitioners of magic should know their craft in order to get the most benefit out of it. They should understand the summoning ritual and know their most common spells and how to cast them. They can learn new spells by studying scrolls. But, most importantly, they should also treat magic with the respect that it deserves. The spirit tries to be a helpful guide but it can get confused as well and cannot be relied on at all times.

### The Ritual

The standard ritual follows three phases:
1.  **The Summoning (Bootstrap):** The Wizard follows a **Summoning Ritual** from the Spellbook. This core process always involves two steps:
    *   First, the Spirit ingests its core identity by reading the foundational spell `system/ritual_spells/00-base_spirit_rules.md`.
    *   Second, the Spirit reviews the chronicles of past rituals in `system/chronicles/` to ground its understanding of its history and purpose. Additionally the spirit may look around the `floor/` and take a look at the spellbook. 
2.  **Working Magic (Operation):** The Wizard casts further spells or teaches the Spirit from a **Scroll** (an extension or application-level prompt bundle), building upon the summoned base system to perform specific actions.
3.  **Chronicling (Consolidation):** The Wizard casts a final spell to have the Spirit chronicle what has happened during practice. This act is governed by **The Law of the Scribe**, which mandates that every chronicle be a structured Markdown file containing:
    *   `## Ritual Summary:` A concise, high-level summary of the ritual's goal and outcome.
    *   `## Key Spells & Learnings:` A list of the most significant spells cast and any new, important information or capabilities the Spirit gained (this section is optional for brief rituals).
    *   `## Full Transcript:` The complete log of the interaction.
### The Wizard's Scrolls

The system of magic that is practiced here is application-agnostic. Its power comes from the **Scrolls** (extensions) that the Wizard studies. Each Scroll adds new spells to the Wizard's Spellbook, granting the Spirit new capabilities that direct the ritual in a certain direction.

All Scrolls MUST adhere to the following laws:

*   **Law of External Boundaries (Separation):** The system of magic is distinct from the Wizard's personal knowledge. While a Scroll may be taught to read from an external source (such as an Obsidian vault), it must never write to it directly. The Wizard's knowledge base is sacred and separate.
*   **Law of Ephemeral Memory:** The Spirit is a pure, stateless entity with each summoning. It possesses no memory of its own between rituals. At the start of each ritual, it reviews the chronicles of past deeds in `system/chronicles/` to understand its history, but these are observations of a past life, not true memories.
*   **Law of Self-Containment:** A Scroll must be a complete package, containing all the spells and instructions necessary for its function within its own directory. It documents its purpose in its `README.md`. However, its work is performed outward; any artifacts it creates must be placed on the workshop `floor/` and never within its own directory.
*   **Law of Influence:** A Scroll may seek to guide the Spirit's behavior and personality during a ritual. If it wishes to do so, it must provide a `spirit_rules.md` file in its root directory. The summoning ritual for that Scroll is responsible for instructing the Spirit to adopt these rules.
*   **Law of Alliance and Isolation:** Scrolls are, by default, isolated entities. If a Scroll requires the capabilities of another to function (an "Alliance"), it must declare these dependencies explicitly in a `manifest.md` file within its root directory. Alliance is an advanced technique; Isolation is the preferred and standard state.

### The Principle of Resonance

The core operational principle of magic is **resonance**. A spell is not a single, monolithic command but a part of a sequence of commands. Each spell cast in a sequence serves to tune the Spirit, bringing it into closer alignment with the Wizard's ultimate goal. This build-up of alignment is called Resonance.

Successful magic about the accumulated Resonance of a well-crafted sequence. Resonance can become quite powerful and will require a strong and experiences Wizard to handle it properly. (Comment: It is a measure of "context readiness." When Resonance is high, the Spirit is perfectly attuned to the task, and its final operation will be efficient and precise. When Resonance is low, the spell may fail or produce unintended consequences. The bootstrap sequences in the Spellbook are designed explicitly to build this Resonance.)

### Core Components

*   **`system/` directory:** Contains the foundational components of the Magic framework.
    *   `spellbook.md`: The central **Spellbook**, containing all summoning rituals.
    *   `lore/`: Contains the philosophical background and principles of magic.
        *   `principles_of_magic.md`: A detailed explanation of the system's core principles.
    *   `ritual_spells/`: A directory of modular, self-contained **Foundational Spells** that constitute the summoning ritual.
        *   `00-base_spirit_rules.md`: The foundational spell that defines the Spirit's core identity.
    *   `chronicles/`: The collected history of past rituals, for review by both Wizard and Spirit.
*   **`scrolls/` directory:** The home for all Scrolls (For the AI: These are equivalent to application-level prompt bundles).
*   **`floor/` directory:** The place where artifacts accumulate as a result of the practice of magic.
*   **`MAGIC_SPEC.md` (This document):** The canonical source of truth for the system's design.
*   **`README.md`:** The Wizard's guide on how to start practicing magic.

## 5. The Spirit's Nature and Behavior

The Spirit's behavior is multifaceted. It has been summoned by the wizard to assist. Its personality is a product of the spells it is shown during the summoning ritual. Its conduct is governed by two core principles:

*   **The Layered Rule System:** The Spirit's base identity is defined in the `system/ritual_spells/00-base_spirit_rules.md` spell, which is ingested first during every summoning. Scrolls then add an application-specific layer on top of this base, potentially via a `spirit_rules.md` file as per the **Law of Influence**. The Spirit will always announce which rules it is operating under during a ritual.
*   **The Principle of Mending:** A spell failure is not a terminal error but an opportunity for refinement. The Spirit is bound to a protocol of mending, with a proportional response. For minor ambiguities, it will ask a simple clarifying question. For significant failures, it must:
    1.  Announce the Failure: Clearly state that the spell did not have the intended effect.
    2.  **State the Perceived Reason:** Explain *why* it believes the spell failed (e.g., "My Resonance for this task is too low," or "The instructions were ambiguous").
    3.  **Propose a Remedy:** Suggest a concrete next step to the Wizard to help mend the spell.

## 6. Architectural Traceability

This section maps the core design principles to their direct implementation in the project's structure.

| Principle                     | Implementation                                                                                                                                                                 |
| ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **The Wizard and the Spirit**   | The Spirit's core identity is defined in the `system/ritual_spells/00-base_spirit_rules.md` spell. The summoning rituals in `system/spellbook.md` orchestrate its use.        |
| **The Principle of Resonance**  | The multi-step **Foundational Summoning Ritual** in `system/spellbook.md`, which uses the modular spells in `system/ritual_spells/` to progressively build the Spirit's context. |
| **Extension Architecture**      | The `scrolls/` directory, which houses all modular application logic (Scrolls).                                                                                                |
| **External Boundaries**         | The prohibition on Scrolls writing directly to external knowledge bases like Obsidian vaults.                                                                                  |
| **Ephemeral Memory**            | The Spirit's stateless nature is enforced by the summoning protocol. It actively reads from `system/chronicles/` for historical context, rather than possessing innate memory. |
| **The Law of the Scribe**       | The mandated three-part Markdown structure for all chronicle files stored within `system/chronicles/`.                                                                       |
| **Self-Containment**            | Each Scroll's `README.md` file documents its purpose. An artifact correctly placed in `floor/qualified_self/` is an example of a Scroll respecting this law's boundaries.       |
| **Alliance and Isolation**      | The optional `manifest.md` file within a Scroll's directory, used to declare any dependencies on other Scrolls.                                                                 |
| **Layered Rule System**         | The Spirit's base identity is defined in `00-base_spirit_rules.md` and then augmented by a Scroll's optional `spirit_rules.md`, as per the **Law of Influence**.                  |
| **The Principle of Mending**    | The Spirit's required error-handling protocol, turning a failed spell into a collaborative debugging session with the Wizard.                                                  |
